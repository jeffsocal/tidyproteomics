<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="r - omics: coded wiring for local analysis of quantitative omics data
">
<title>Subsetting • tidyproteomics</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Subsetting">
<meta property="og:description" content="r - omics: coded wiring for local analysis of quantitative omics data
">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">tidyproteomics</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/get-started.html">Get Started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/updates.html">update history</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../articles/data-object.html">the tidyproteomics data-object</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../articles/importing.html">importing</a>
    <a class="dropdown-item" href="../articles/subsetting.html">subsetting</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../articles/workflow-simple.html">Workflow - Import &amp; Summary</a>
    <a class="dropdown-item" href="../articles/workflow-subset.html">Workflow - Subset</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Subsetting</h1>
            
      
      
      <div class="d-none name"><code>subsetting.Rmd</code></div>
    </div>

    
    
<p>Subsetting data in tidyproteomics with <code><a href="../reference/subset.html">subset()</a></code> is
straight forward, and similar to the tidyverse function
<code>tidyverse::filter()</code>. This function however introduces a new
concept for pattern matching which is similar to SQL syntax,
<code>%like%</code> and <code>%!like%</code> will include or exclude
string based variables that contain the matching regular expression. The
name <code><a href="../reference/subset.html">subset()</a></code> is used here to avoid conflicting with
<code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">dplyr::filter()</a></code> and to also separate it as a tidyproteomics
specific function due to the underlying nature of the tidyproteomics
data structure.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://dplyr.tidyverse.org" class="external-link">"dplyr"</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st">"tidyproteomics"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ecoli_proteins</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="st">'sample'</span><span class="op">)</span></span>
<span><span class="co">#&gt;  sample files proteins protein_groups peptides peptides_unique quantifiable</span></span>
<span><span class="co">#&gt;      ko     4     2772           2772    31271           31025         98.4</span></span>
<span><span class="co">#&gt;      wt     4     2772           2772    31271           31025         98.5</span></span>
<span><span class="co">#&gt;        CVs</span></span>
<span><span class="co">#&gt;  0.1380689</span></span>
<span><span class="co">#&gt;  0.1612074</span></span></code></pre></div>
<p>Subsetting can be a powerful way to slice-and-dice data, print quick
stats or provide a quick visualization. For example, the ecoli data set
can be subset to just the proteins with “Ribosome” in the
description:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ecoli_proteins</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/subset.html">subset</a></span><span class="op">(</span><span class="va">description</span> <span class="op">%like%</span> <span class="st">"Ribosome"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="st">'sample'</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Subsetting data: <span style="color: #FF5F00; font-style: italic;">description</span> <span style="color: #0000BB;">%like%</span> <span style="color: #FF5F00; font-style: italic;">Ribosome</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Subsetting data: <span style="color: #FF5F00; font-style: italic;">description</span> <span style="color: #0000BB;">%like%</span> <span style="color: #FF5F00; font-style: italic;">Ribosome</span> ... done</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Summary: sample</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  sample files proteins protein_groups peptides peptides_unique quantifiable</span></span>
<span><span class="co">#&gt;      ko     4       11             11      116             115         99.1</span></span>
<span><span class="co">#&gt;      wt     4       11             11      116             115         99.1</span></span>
<span><span class="co">#&gt;        CVs</span></span>
<span><span class="co">#&gt;  0.1425569</span></span>
<span><span class="co">#&gt;  0.1588590</span></span>
<span><span class="co">#&gt; </span></span></code></pre></div>
<p>Aside from filtering directly on <code>protein_accession</code>
values, subsetting can use any of the columns in the
<code>experiments</code> table:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">ecoli_proteins</span><span class="op">$</span><span class="va">experiments</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "sample_id"   "import_file" "sample_file" "sample"      "replicate"</span></span></code></pre></div>
<p>any of the terms in the <code>accounting</code> table:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">ecoli_proteins</span><span class="op">$</span><span class="va">accounting</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "sample_id"           "protein"             "protein_group"      </span></span>
<span><span class="co">#&gt; [4] "match_between_runs"  "num_peptides"        "num_unique_peptides"</span></span>
<span><span class="co">#&gt; [7] "num_psms"</span></span></code></pre></div>
<p>and any of the terms in the <code>annotations</code> table:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ecoli_proteins</span><span class="op">$</span><span class="va">annotations</span><span class="op">$</span><span class="va">term</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "description"        "gene_id_entrez"     "gene_id_ensemble"  </span></span>
<span><span class="co">#&gt; [4] "gene_name"          "biological_process" "cellular_component"</span></span>
<span><span class="co">#&gt; [7] "molecular_function" "wiki_pathway"       "reactome_pathway"</span></span></code></pre></div>
<p>This allows for the specific importing of specialized terms with
<code><a href="../reference/annotate.html">annotate()</a></code> from which subsetting can be performed.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ecoli_proteins</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/subset.html">subset</a></span><span class="op">(</span><span class="va">cellular_component</span> <span class="op">%like%</span> <span class="st">"Ribosome"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="st">'sample'</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Subsetting data: <span style="color: #FF5F00; font-style: italic;">cellular_component</span> <span style="color: #0000BB;">%like%</span> <span style="color: #FF5F00; font-style: italic;">Ribosome</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Subsetting data: <span style="color: #FF5F00; font-style: italic;">cellular_component</span> <span style="color: #0000BB;">%like%</span> <span style="color: #FF5F00; font-style: italic;">Ribosome</span> ... done</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Summary: sample</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  sample files proteins protein_groups peptides peptides_unique quantifiable</span></span>
<span><span class="co">#&gt;      ko     4     2772           2772    31271           31025         98.4</span></span>
<span><span class="co">#&gt;      wt     4     2772           2772    31271           31025         98.5</span></span>
<span><span class="co">#&gt;        CVs</span></span>
<span><span class="co">#&gt;  0.1380689</span></span>
<span><span class="co">#&gt;  0.1612074</span></span>
<span><span class="co">#&gt; </span></span></code></pre></div>
<p>Additionally, provided the quantitative platform produces an imputed
value commonly referred to as “match between runs”, the data can be
filtered to exclude these values. This can be valuable in cases were
true presence/absence is desired, larger portions of the proteome
differ.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ecoli_proteins</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/subset.html">subset</a></span><span class="op">(</span><span class="va">match_between_runs</span> <span class="op">==</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="st">'sample'</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Subsetting data: <span style="color: #FF5F00; font-style: italic;">match_between_runs</span> <span style="color: #0000BB;">==</span> <span style="color: #FF5F00; font-style: italic;">FALSE</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Subsetting data: <span style="color: #FF5F00; font-style: italic;">match_between_runs</span> <span style="color: #0000BB;">==</span> <span style="color: #FF5F00; font-style: italic;">FALSE</span> ... done</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Summary: sample</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  sample files proteins protein_groups peptides peptides_unique quantifiable</span></span>
<span><span class="co">#&gt;      ko     4     2683           2683    30779           30562         99.1</span></span>
<span><span class="co">#&gt;      wt     4     2666           2666    30811           30589         99.1</span></span>
<span><span class="co">#&gt;        CVs</span></span>
<span><span class="co">#&gt;  0.1329208</span></span>
<span><span class="co">#&gt;  0.1558694</span></span>
<span><span class="co">#&gt; </span></span></code></pre></div>
<p>Also, data can be filtered to proteins containing a desired number of
underlying peptides.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ecoli_proteins</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/subset.html">subset</a></span><span class="op">(</span><span class="va">mum_peptides</span> <span class="op">&lt;=</span> <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="st">'sample'</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> Variable `mum_peptides` not found in data.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Summary: sample</span> ──</span></span>
<span><span class="co">#&gt;  sample files proteins protein_groups peptides peptides_unique quantifiable</span></span>
<span><span class="co">#&gt;      ko     4     2772           2772    31271           31025         98.4</span></span>
<span><span class="co">#&gt;      wt     4     2772           2772    31271           31025         98.5</span></span>
<span><span class="co">#&gt;        CVs</span></span>
<span><span class="co">#&gt;  0.1380689</span></span>
<span><span class="co">#&gt;  0.1612074</span></span>
<span><span class="co">#&gt; </span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ecoli_proteins</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/subset.html">subset</a></span><span class="op">(</span><span class="va">num_unique_peptides</span> <span class="op">&lt;=</span> <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="st">'sample'</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Subsetting data: <span style="color: #FF5F00; font-style: italic;">num_unique_peptides</span> <span style="color: #0000BB;">&lt;=</span> <span style="color: #FF5F00; font-style: italic;">1</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Subsetting data: <span style="color: #FF5F00; font-style: italic;">num_unique_peptides</span> <span style="color: #0000BB;">&lt;=</span> <span style="color: #FF5F00; font-style: italic;">1</span> ... done</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Summary: sample</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  sample files proteins protein_groups peptides peptides_unique quantifiable</span></span>
<span><span class="co">#&gt;      ko     4      336            336      396             336         50.7</span></span>
<span><span class="co">#&gt;      wt     4      336            336      396             336         50.3</span></span>
<span><span class="co">#&gt;        CVs</span></span>
<span><span class="co">#&gt;  0.2357830</span></span>
<span><span class="co">#&gt;  0.2518408</span></span>
<span><span class="co">#&gt; </span></span></code></pre></div>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Jeff Jones.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
