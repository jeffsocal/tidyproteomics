<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="tidyproteomics: simplified data object and analysis functions
">
<title>Importing • tidyproteomics</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Importing">
<meta property="og:description" content="tidyproteomics: simplified data object and analysis functions
">
<meta property="og:image" content="https://jeffsocal.github.io/tidyproteomics/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">tidyproteomics</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.7.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/overview.html">Overview</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/updates.html">Updates</a>
    <a class="dropdown-item" href="../articles/data-object.html">The Data-Object</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Operations</h6>
    <a class="dropdown-item" href="../articles/importing.html">Importing</a>
    <a class="dropdown-item" href="../articles/summarizing.html">Summarizing</a>
    <a class="dropdown-item" href="../articles/subsetting.html">Subsetting</a>
    <a class="dropdown-item" href="../articles/normalizing.html">Normalizing</a>
    <a class="dropdown-item" href="../articles/imputing.html">Imputing</a>
    <a class="dropdown-item" href="../articles/annotating.html">Annotating</a>
    <a class="dropdown-item" href="../articles/collapsing.html">Protein Accounting</a>
    <a class="dropdown-item" href="../articles/extracting.html">Extracting</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Analysis</h6>
    <a class="dropdown-item" href="../articles/visualizing.html">Visualizing</a>
    <a class="dropdown-item" href="../articles/expression.html">Expression</a>
    <a class="dropdown-item" href="../articles/enrichment.html">Enrichment</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Workflows</h6>
    <a class="dropdown-item" href="../articles/workflow-simple.html">Simple</a>
    <a class="dropdown-item" href="../articles/workflow-importing.html">Importing Demo</a>
    <a class="dropdown-item" href="../articles/workflow-userimport.html">User Defined Import</a>
    <a class="dropdown-item" href="../articles/workflow-publication.html">Publication Demo</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Importing</h1>
            
      
      
      <div class="d-none name"><code>importing.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="data-support">Data Support<a class="anchor" aria-label="anchor" href="#data-support"></a>
</h2>
<p>Importing is currently implemented for a few platforms and assume
peptide level FDR (at the user’s desired level) has already been
accounted for. See <code><a href="../articles/importing.html">vignette("importing")</a></code>. Importing is
flexible enough to accept other data platforms in flat files (.csv,
.tsv, and .xlsx) with a custom configuration.</p>
<table style="width:99%;" class="table">
<colgroup>
<col width="8%">
<col width="11%">
<col width="9%">
<col width="69%">
</colgroup>
<thead><tr class="header">
<th>Platform</th>
<th>peptides</th>
<th>proteins</th>
<th>notes</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><a href="#proteomediscoverer">ProteomeDiscoverer</a></td>
<td>*.xlsx <em>peptides export</em>
</td>
<td>*.xlsx <em>proteins export</em>
</td>
<td>
<p>requires layout configuration</p>
<p><a href="https://www.thermofisher.com/us/en/home/industrial/mass-spectrometry/liquid-chromatography-mass-spectrometry-lc-ms/lc-ms-software/multi-omics-data-analysis/proteome-discoverer-software.html" class="external-link">website</a></p>
</td>
</tr>
<tr class="even">
<td><a href="#maxquant">MaxQuant</a></td>
<td>evidence.txt</td>
<td>proteinGroups.txt</td>
<td><a href="https://www.maxquant.org/" class="external-link">website</a></td>
</tr>
<tr class="odd">
<td><a href="#maxquant-1">FragPipe</a></td>
<td>combined_peptide.tsv</td>
<td>combined_protein.tsv</td>
<td><a href="https://fragpipe.nesvilab.org/" class="external-link">website</a></td>
</tr>
<tr class="even">
<td><a href="#skyline">Skyline</a></td>
<td>*.csv <em>MSstats peptide report</em>
</td>
<td></td>
<td>
<p>requires MSstats install</p>
<p><a href="https://skyline.ms/project/home/software/skyline/begin.view" class="external-link">website</a></p>
</td>
</tr>
<tr class="odd">
<td><a href="#dia-nn">DIA-NN</a></td>
<td>*.tsv <em>peptide report</em>
</td>
<td></td>
<td><a href="https://github.com/vdemichev/DiaNN" class="external-link">website</a></td>
</tr>
<tr class="even">
<td><a href="#mztab">mzTab</a></td>
<td>*.mzTab (v1.0.0)</td>
<td>*.mzTab (v1.0.0)</td>
<td>
<p>does not track MBR</p>
<p><a href="https://github.com/HUPO-PSI/mzTab" class="external-link">website</a></p>
</td>
</tr>
</tbody>
</table>
<p>Table formatted data (eg. .csv, .tsv, .xlsx) from ProteomeDiscoverer,
MaxQuant and FragPipe meet the requirements, and are defined in the
package data <code>tidyproteomics/inst/extdata/config/</code>
accordingly. Note that the groups <em>sample</em>, <em>identifier</em>
and <em>quantitative</em> are required, while the rest are optional, and
only used if a match is found - currently this does not have good error
handeling, so be aware. For ProteomeDiscoverer the peptide’s config can
be modified to use <code>Master Protein Accessions</code> or
<code>Protein Accessions</code> if either column is present. Also note,
that for some configurations the <em>sample</em> group has no defined
“supplied name”, as this is later derived by the extraction code defined
in the columns labeled “pattern”.</p>
<p>The currently known and not directly supported quantitative
proteomics platforms are <a href="https://biognosys.com/software/spectronaut/" class="external-link">Spectronaut</a> and
<a href="https://seer.bio/products/proteograph-analysis-suite/" class="external-link">Proteograph
Analysis Suite</a>. Given a flat-file export, data from these platforms
could also be importable. See User Defined Import.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://dplyr.tidyverse.org" class="external-link">"dplyr"</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://jeffsocal.github.io/tidyproteomics/">"tidyproteomics"</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="proteomediscoverer">ProteomeDiscoverer<a class="anchor" aria-label="anchor" href="#proteomediscoverer"></a>
</h3>
<p>The ProteomeDiscoverer software suite has the ability to export data
post analysis for both <code>peptides</code> and <code>proteins</code>.
This can be accomplished by opening the Study Results, then selecting
<code>File \&gt; Export \&gt; To Microsoft Excel</code>. In the pop up
keep only Level 1 checked, and select either “Proteins” or “Peptide
Groups”. See the Exporting section below to make sure the required
columns are present.</p>
<p>The data exported from ProteomeDiscoverer is not very “tidy”, as it
has mixed wide-format columns (eg. Abundance for each sample on a single
row) and long-format. The data table from ProteomeDiscoverer is
protein-centric wherein each row is dedicated to a single protein,
rather than a single measurement. To clean up this data we need to
“rotate” the wide-format columns such that each row in our new table is
a single observation. In other words, we need a single abundance value
for a single protein from a single sample, per row. To accomplish this
we need to pivot the wide-format columns defined in the column
<strong>pivot</strong> then “extract” the sample name from the column
header as defined in the column <strong>pattern_extract</strong>. These
patterns conform to standard regular expressions.</p>
<p>Note that the pivot columns will provide the basis for
<em>sample</em> and <em>sample_file</em> by extracting the correct
values as indicated in the <strong>pattern_extract</strong> column, and
hence the absence of a value for <strong>column_import</strong>.</p>
<div class="section level4">
<h4 id="initial-set-up">Initial Set Up<a class="anchor" aria-label="anchor" href="#initial-set-up"></a>
</h4>
<p>When setting up your experiment it is essential to create sample
names in the <code>Study Definition</code> tab of the open Study,
navigate to the <code>Study Factors</code> box and simply add
<code>Catigorical Factor</code> and name it (eg. My_Sample) and name
your study groups (eg. WT and KO). These destinations need to be applied
to the import files under the <code>Samples</code> tab. Notice the left
most column is the added <code>Catigorical Factor</code> named the same
as what was supplied. In each line there is a pull-down menu for
designating each file (or label for TMT) to one of the
<code>Catigorical Factors</code>. This will now ensure that when
importing the data there are properly labeled sample. No big deal if
that hasn’t been done, it can be fixed with the <code><a href="https://purrr.tidyverse.org/reference/modify.html" class="external-link">modify()</a></code>
function.</p>
</div>
<div class="section level4">
<h4 id="exporting">Exporting<a class="anchor" aria-label="anchor" href="#exporting"></a>
</h4>
<p><strong>Abundances</strong> A quick note on reported abundances.
ProteomeDiscoverer reports protein and peptide abundances in several
ways that may not be immediately clear - tidyproteomics should have
access to the raw abundance values, so that normalization and imputation
are starting from scratch. We want to export for example
<code>Abundance: F3: Sample, p97-KD</code>, not
<code>Abundances (Grouped) ...</code>,
<code>Abundance Ratio: ...</code>, or any-other derivation. This can be
set by toggling the display columns in ProteomeDiscoverer to show
<code>Abundance</code>, leaving the other columns should not impact data
importing and will be disregarded.</p>
<div class="section level5">
<h5 id="proteins">Proteins<a class="anchor" aria-label="anchor" href="#proteins"></a>
</h5>
<p>The columns following columns should be considered. These can be
modified in the file
<code>tidyproteomics/inst/extdata/config/ProteomeDiscoverer_proteins.tsv</code>:</p>
<table class="table">
<colgroup>
<col width="10%">
<col width="16%">
<col width="17%">
<col width="16%">
<col width="12%">
<col width="11%">
<col width="5%">
<col width="9%">
</colgroup>
<thead><tr class="header">
<th>category</th>
<th>column_defined</th>
<th>column_import</th>
<th>pattern_extract</th>
<th>pattern_remove</th>
<th>pattern_split</th>
<th>pivot</th>
<th><em>REQUIRED</em></th>
</tr></thead>
<tbody>
<tr class="odd">
<td>sample</td>
<td>sample</td>
<td></td>
<td>“(?&lt;=,).+”</td>
<td></td>
<td></td>
<td></td>
<td>YES</td>
</tr>
<tr class="even">
<td>sample</td>
<td>sample_file</td>
<td></td>
<td>(?&lt;=)F(?=:)</td>
<td></td>
<td></td>
<td></td>
<td>YES</td>
</tr>
<tr class="odd">
<td>identifier</td>
<td>protein</td>
<td>^Accession$</td>
<td></td>
<td></td>
<td>\;</td>
<td></td>
<td>YES</td>
</tr>
<tr class="even">
<td>quantitative</td>
<td>abundance_raw</td>
<td>Abundance\:</td>
<td></td>
<td></td>
<td></td>
<td>TRUE</td>
<td>YES</td>
</tr>
<tr class="odd">
<td>impute</td>
<td>match_between_runs</td>
<td>Found in Sample\:</td>
<td>Found</td>
<td></td>
<td></td>
<td>TRUE</td>
<td>YES</td>
</tr>
<tr class="even">
<td>accounting</td>
<td>num_peptides</td>
<td>^# Peptides$</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>accounting</td>
<td>num_unique_peptides</td>
<td>^# Unique Peptides$</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>accounting</td>
<td>num_psms</td>
<td># PSMs</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>annotation</td>
<td>description</td>
<td>Description</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td><em>…etc</em></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section level5">
<h5 id="peptides">Peptides<a class="anchor" aria-label="anchor" href="#peptides"></a>
</h5>
<p>The columns following columns should be considered. These can be
modified in the file
<code>tidyproteomics/inst/extdata/config/ProteomeDiscoverer_ppeptides.tsv</code>:</p>
<table style="width:100%;" class="table">
<colgroup>
<col width="10%">
<col width="15%">
<col width="20%">
<col width="16%">
<col width="12%">
<col width="11%">
<col width="5%">
<col width="9%">
</colgroup>
<thead><tr class="header">
<th>category</th>
<th>column_defined</th>
<th>column_import</th>
<th>pattern_extract</th>
<th>pattern_remove</th>
<th>pattern_split</th>
<th>pivot</th>
<th><em>REQUIRED</em></th>
</tr></thead>
<tbody>
<tr class="odd">
<td>sample</td>
<td>sample</td>
<td></td>
<td>“(?&lt;=,).+”</td>
<td></td>
<td></td>
<td></td>
<td>YES</td>
</tr>
<tr class="even">
<td>sample</td>
<td>sample_file</td>
<td></td>
<td>(?&lt;=)F(?=:)</td>
<td></td>
<td></td>
<td></td>
<td>YES</td>
</tr>
<tr class="odd">
<td>identifier</td>
<td>protein</td>
<td>Master Protein Accessions</td>
<td></td>
<td></td>
<td>\;</td>
<td></td>
<td>YES</td>
</tr>
<tr class="even">
<td>identifier</td>
<td>peptide</td>
<td>Annotated Sequence</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>YES</td>
</tr>
<tr class="odd">
<td>identifier</td>
<td>modification</td>
<td>^Modifications$</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>YES</td>
</tr>
<tr class="even">
<td>quantitative</td>
<td>abundance_raw</td>
<td>Abundance\:</td>
<td></td>
<td></td>
<td></td>
<td>TRUE</td>
<td>YES</td>
</tr>
<tr class="odd">
<td>impute</td>
<td>match_between_runs</td>
<td>Found in Sample\:</td>
<td>Found</td>
<td></td>
<td></td>
<td>TRUE</td>
<td>YES</td>
</tr>
<tr class="even">
<td>accounting</td>
<td>num_psms</td>
<td># PSMs</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>accounting</td>
<td>description</td>
<td>Description</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td><em>…etc</em></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># replace path_to_package_data("proteins") with the path to your local data.</span></span>
<span><span class="co"># hela_proteins &lt;- "./data/hela_export_table.xlsx" %&gt;%</span></span>
<span><span class="co">#    import("ProteomeDiscoverer", "proteins") </span></span>
<span><span class="va">data_proteins</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/path_to_package_data.html">path_to_package_data</a></span><span class="op">(</span><span class="st">"hela_proteins"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>   <span class="fu"><a href="../reference/import.html">import</a></span><span class="op">(</span><span class="st">"ProteomeDiscoverer"</span>, <span class="st">"proteins"</span><span class="op">)</span> </span></code></pre></div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="maxquant">MaxQuant<a class="anchor" aria-label="anchor" href="#maxquant"></a>
</h3>
<p>The MaxQuant software suite creates files in project sub directories
following <code>current_project \&gt; combined \&gt; txt</code> with
data both <em>peptides (evidence.txt)</em> and <em>proteins
(proteinGroups.txt)</em>.</p>
<p>The data exported from MaxQuant for the file
<em>proteinGroups.txt</em> is not very “tidy”, as it has mixed
wide-format columns (eg. Abundance for each sample on a single row) and
long-format. The data table from MaxQuant is protein-centric wherein
each row is dedicated to a single protein, rather than a single
measurement. To clean up this data we need to “rotate” the wide-format
columns such that each row in our new table is a single observation. In
other words, we need a single abundance value for a single protein from
a single sample, per row. To accomplish this we need to pivot the
wide-format columns defined in the column <strong>pivot</strong> then
“extract” the sample name from the column header as defined in the
column <strong>pattern_extract</strong>. These patterns conform to
standard regular expressions.</p>
<p>Note also that we want to remove rows from the decoy search labeled
<em>REV_*</em>, and indicated in the column
<strong>pattern_remove</strong>.</p>
<div class="section level4">
<h4 id="initial-set-up-1">Initial Set Up<a class="anchor" aria-label="anchor" href="#initial-set-up-1"></a>
</h4>
<p>While <em>evidence.txt</em> contains values for each imported file
(important for comparative statistics), the <em>proteinGroups.txt</em>
file will only contain an entry for each file if in the initial MaxQuant
configuration the Experiment column in the raw data tab has a unique
value for each file (eg 1, 2, 3, …), otherwise the values get merged on
common experiment groups in the output for the protein level data. The
sample groups can then be set with the <code><a href="https://purrr.tidyverse.org/reference/modify.html" class="external-link">modify()</a></code>
function.</p>
</div>
<div class="section level4">
<h4 id="exporting-1">Exporting<a class="anchor" aria-label="anchor" href="#exporting-1"></a>
</h4>
<div class="section level5">
<h5 id="proteins-1">Proteins<a class="anchor" aria-label="anchor" href="#proteins-1"></a>
</h5>
<p>The columns following columns should be considered. These can be
modified in the file
<code>tidyproteomics/inst/extdata/config/MaxQuant_proteins.tsv</code>:</p>
<table class="table">
<colgroup>
<col width="10%">
<col width="16%">
<col width="16%">
<col width="18%">
<col width="12%">
<col width="11%">
<col width="5%">
<col width="9%">
</colgroup>
<thead><tr class="header">
<th>category</th>
<th>column_defined</th>
<th>column_import</th>
<th>pattern_extract</th>
<th>pattern_remove</th>
<th>pattern_split</th>
<th>pivot</th>
<th><em>REQUIRED</em></th>
</tr></thead>
<tbody>
<tr class="odd">
<td>sample</td>
<td>sample</td>
<td></td>
<td>(?&lt;=\s)[0-9]+</td>
<td></td>
<td></td>
<td></td>
<td>YES</td>
</tr>
<tr class="even">
<td>sample</td>
<td>sample_file</td>
<td></td>
<td>(?&lt;=\s)[0-9]+</td>
<td></td>
<td></td>
<td></td>
<td>YES</td>
</tr>
<tr class="odd">
<td>identifier</td>
<td>protein</td>
<td>^Proteins IDs$</td>
<td>(?&lt;=\|).*?(?=\|)</td>
<td>^REV\_</td>
<td>\;</td>
<td></td>
<td>YES</td>
</tr>
<tr class="even">
<td>quantitative</td>
<td>abundance_raw</td>
<td>^Intensity\s$</td>
<td></td>
<td></td>
<td></td>
<td>TRUE</td>
<td>YES</td>
</tr>
<tr class="odd">
<td>accounting</td>
<td>num_psms</td>
<td>^MS/MS count</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>accounting</td>
<td>num_peptides</td>
<td>^Peptides\s</td>
<td></td>
<td></td>
<td></td>
<td>TRUE</td>
<td></td>
</tr>
<tr class="odd">
<td>accounting</td>
<td>num_unique_peptides</td>
<td>^Unique peptides\s</td>
<td></td>
<td></td>
<td></td>
<td>TRUE</td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section level5">
<h5 id="peptides-1">Peptides<a class="anchor" aria-label="anchor" href="#peptides-1"></a>
</h5>
<p>The columns following columns should be considered. These can be
modified in the file
<code>tidyproteomics/inst/extdata/config/MaxQuant_peptides.tsv</code>:</p>
<table style="width:100%;" class="table">
<colgroup>
<col width="10%">
<col width="15%">
<col width="17%">
<col width="18%">
<col width="12%">
<col width="11%">
<col width="5%">
<col width="9%">
</colgroup>
<thead><tr class="header">
<th>category</th>
<th>column_defined</th>
<th>column_import</th>
<th>pattern_extract</th>
<th>pattern_remove</th>
<th>pattern_split</th>
<th>pivot</th>
<th><em>REQUIRED</em></th>
</tr></thead>
<tbody>
<tr class="odd">
<td>sample</td>
<td>sample</td>
<td>Raw file</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>YES</td>
</tr>
<tr class="even">
<td>sample</td>
<td>sample_file</td>
<td>Experiment</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>YES</td>
</tr>
<tr class="odd">
<td>identifier</td>
<td>protein</td>
<td>^Proteins$</td>
<td>(?&lt;=\|).*?(?=\|)</td>
<td></td>
<td>\;</td>
<td></td>
<td>YES</td>
</tr>
<tr class="even">
<td>identifier</td>
<td>peptide</td>
<td>^Sequence$</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>YES</td>
</tr>
<tr class="odd">
<td>identifier</td>
<td>modification</td>
<td>^Modified sequence$</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>YES</td>
</tr>
<tr class="even">
<td>quantitative</td>
<td>abundance_raw</td>
<td>^Intensity$</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>YES</td>
</tr>
<tr class="odd">
<td>impute</td>
<td>match_between_runs</td>
<td>Type</td>
<td>MATCH</td>
<td></td>
<td></td>
<td></td>
<td>YES</td>
</tr>
<tr class="even">
<td>accounting</td>
<td>num_psms</td>
<td>MS/MS count</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_proteins</span> <span class="op">&lt;-</span> <span class="st">"path_to_maxquant_project/combined/txt/proteinGroups.txt"</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>   <span class="fu"><a href="../reference/import.html">import</a></span><span class="op">(</span><span class="st">"MaxQuant"</span>, <span class="st">"proteins"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>   <span class="fu"><a href="../reference/reassign.html">reassign</a></span><span class="op">(</span>field <span class="op">=</span> <span class="st">'sample'</span>, pattern <span class="op">=</span> <span class="st">'sample_1'</span>, replace <span class="op">=</span> <span class="st">'ko'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>   <span class="fu"><a href="../reference/reassign.html">reassign</a></span><span class="op">(</span>field <span class="op">=</span> <span class="st">'sample'</span>, pattern <span class="op">=</span> <span class="st">'sample_2'</span>, replace <span class="op">=</span> <span class="st">'ko'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>   <span class="fu"><a href="../reference/reassign.html">reassign</a></span><span class="op">(</span>field <span class="op">=</span> <span class="st">'sample'</span>, pattern <span class="op">=</span> <span class="st">'sample_3'</span>, replace <span class="op">=</span> <span class="st">'ko'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>   <span class="fu"><a href="../reference/reassign.html">reassign</a></span><span class="op">(</span>field <span class="op">=</span> <span class="st">'sample'</span>, pattern <span class="op">=</span> <span class="st">'sample_4'</span>, replace <span class="op">=</span> <span class="st">'ko'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>   <span class="fu"><a href="../reference/reassign.html">reassign</a></span><span class="op">(</span>field <span class="op">=</span> <span class="st">'sample'</span>, pattern <span class="op">=</span> <span class="st">'sample_5'</span>, replace <span class="op">=</span> <span class="st">'wt'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>   <span class="fu"><a href="../reference/reassign.html">reassign</a></span><span class="op">(</span>field <span class="op">=</span> <span class="st">'sample'</span>, pattern <span class="op">=</span> <span class="st">'sample_6'</span>, replace <span class="op">=</span> <span class="st">'wt'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>   <span class="fu"><a href="../reference/reassign.html">reassign</a></span><span class="op">(</span>field <span class="op">=</span> <span class="st">'sample'</span>, pattern <span class="op">=</span> <span class="st">'sample_7'</span>, replace <span class="op">=</span> <span class="st">'wt'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>   <span class="fu"><a href="../reference/reassign.html">reassign</a></span><span class="op">(</span>field <span class="op">=</span> <span class="st">'sample'</span>, pattern <span class="op">=</span> <span class="st">'sample_8'</span>, replace <span class="op">=</span> <span class="st">'wt'</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level3" data-link="MaxQuant">
<h3 id="maxquant-1">FragPipe<a class="anchor" aria-label="anchor" href="#maxquant-1"></a>
</h3>
<p>The FragPipe software suite creates files in project sub directory
with data both <em>peptides (combined_peptide.tsv)</em> and <em>proteins
(combined_protein.tsv)</em>.</p>
<p>The data exported from FragPipe for the file
<em>combined_protein.tsv</em> is not very “tidy”, as it has mixed
wide-format columns (eg. Intensity for each sample on a single row) and
long-format. The data table from FragPipe is protein-centric wherein
each row is dedicated to a single protein, rather than a single
measurement. To clean up this data we need to “rotate” the wide-format
columns such that each row in our new table is a single observation. In
other words, we need a single abundance value for a single protein from
a single sample, per row. To accomplish this we need to pivot the
wide-format columns defined in the column <strong>pivot</strong> then
“extract” the sample name from the column header as defined in the
column <strong>pattern_extract</strong>. These patterns conform to
standard regular expressions.</p>
<div class="section level4">
<h4 id="initial-set-up-2">Initial Set Up<a class="anchor" aria-label="anchor" href="#initial-set-up-2"></a>
</h4>
<p>FragPipe already removes rows from the decoy search if indicated in
the workflow setup, if however this is not being done you can indicated
a pettern in the column <strong>pattern_remove</strong>.</p>
</div>
<div class="section level4">
<h4 id="exporting-2">Exporting<a class="anchor" aria-label="anchor" href="#exporting-2"></a>
</h4>
<div class="section level5">
<h5 id="proteins-2">Proteins<a class="anchor" aria-label="anchor" href="#proteins-2"></a>
</h5>
<p>The columns following columns should be considered. These can be
modified in the file
<code>tidyproteomics/inst/extdata/config/FragPipe_proteins.tsv</code>:</p>
<table class="table">
<colgroup>
<col width="10%">
<col width="12%">
<col width="24%">
<col width="17%">
<col width="11%">
<col width="10%">
<col width="5%">
<col width="8%">
</colgroup>
<thead><tr class="header">
<th>category</th>
<th>column_defined</th>
<th>column_import</th>
<th>pattern_extract</th>
<th>pattern_remove</th>
<th>pattern_split</th>
<th>pivot</th>
<th><em>REQUIRED</em></th>
</tr></thead>
<tbody>
<tr class="odd">
<td>sample</td>
<td>sample</td>
<td></td>
<td>(?&lt;=\s)[0-9]+</td>
<td></td>
<td></td>
<td></td>
<td>YES</td>
</tr>
<tr class="even">
<td>sample</td>
<td>sample_file</td>
<td></td>
<td>(?&lt;=\s)[0-9]+</td>
<td></td>
<td></td>
<td></td>
<td>YES</td>
</tr>
<tr class="odd">
<td>identifier</td>
<td>protein</td>
<td>^Protein ID$</td>
<td>(?&lt;=\|).*?(?=\|)</td>
<td></td>
<td>\;</td>
<td></td>
<td>YES</td>
</tr>
<tr class="even">
<td>quantitative</td>
<td>abundance_raw</td>
<td>\sMaxLFQ\sIntensity$</td>
<td></td>
<td></td>
<td></td>
<td>TRUE</td>
<td>YES</td>
</tr>
<tr class="odd">
<td>accounting</td>
<td>num_psms</td>
<td>^\d\sSpectral\sCount$</td>
<td></td>
<td></td>
<td></td>
<td>TRUE</td>
<td></td>
</tr>
<tr class="even">
<td>accounting</td>
<td>num_psms_unique</td>
<td>^\sUnique\sSpectral\sCount$</td>
<td></td>
<td></td>
<td></td>
<td>TRUE</td>
<td></td>
</tr>
<tr class="odd">
<td>annotation</td>
<td>description</td>
<td>^Description$</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>annotation</td>
<td>gene_name</td>
<td>^Gene$</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section level5">
<h5 id="peptides-2">Peptides<a class="anchor" aria-label="anchor" href="#peptides-2"></a>
</h5>
<p>The columns following columns should be considered. These can be
modified in the file
<code>tidyproteomics/inst/extdata/config/FragPipe_peptides.tsv</code>:</p>
<table class="table">
<colgroup>
<col width="10%">
<col width="12%">
<col width="19%">
<col width="18%">
<col width="12%">
<col width="11%">
<col width="5%">
<col width="9%">
</colgroup>
<thead><tr class="header">
<th>category</th>
<th>column_defined</th>
<th>column_import</th>
<th>pattern_extract</th>
<th>pattern_remove</th>
<th>pattern_split</th>
<th>pivot</th>
<th><em>REQUIRED</em></th>
</tr></thead>
<tbody>
<tr class="odd">
<td>sample</td>
<td>sample</td>
<td></td>
<td>.+(?=\_\d+\s)</td>
<td></td>
<td></td>
<td></td>
<td>YES</td>
</tr>
<tr class="even">
<td>sample</td>
<td>sample_file</td>
<td></td>
<td>.+(?=\sMax)</td>
<td></td>
<td></td>
<td></td>
<td>YES</td>
</tr>
<tr class="odd">
<td>identifier</td>
<td>protein</td>
<td>^Protein ID$</td>
<td>(?&lt;=\|).*?(?=\|)</td>
<td></td>
<td>\;</td>
<td></td>
<td>YES</td>
</tr>
<tr class="even">
<td>identifier</td>
<td>peptide</td>
<td>^Peptide Sequence$</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>YES</td>
</tr>
<tr class="odd">
<td>quantitative</td>
<td>abundance_raw</td>
<td>\sMaxLFQ\sIntensity$</td>
<td></td>
<td></td>
<td></td>
<td>TRUE</td>
<td>YES</td>
</tr>
<tr class="even">
<td>accounting</td>
<td>num_psms</td>
<td>^\sSpectral\sCount$</td>
<td></td>
<td></td>
<td></td>
<td>TRUE</td>
<td></td>
</tr>
<tr class="odd">
<td>annotation</td>
<td>description</td>
<td>^Protein Description$</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>annotation</td>
<td>gene_name</td>
<td>^Gene$</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section level3" data-link="Skyline">
<h3 id="section"></h3>
</div>
<div class="section level3">
<h3 id="skyline">Skyline<a class="anchor" aria-label="anchor" href="#skyline"></a>
</h3>
<p>The Skyline software suite can export quantitative peptide data for
most analyses. The exported data file is in a fairly “tidy” long format
CSV file, where each peptide for each sample is reported on an
individual row.</p>
<div class="section level4">
<h4 id="initial-set-up-3">Initial Set Up<a class="anchor" aria-label="anchor" href="#initial-set-up-3"></a>
</h4>
<p>A report need to be established, under
<code>File &gt; Export &gt; Report</code>. Select
<code>Edit list...</code>, <code>Group: &gt; External Tools</code> then
click <code>Add...</code>. Select the Columns that correspond to the
required values shown below, name the report in
<code>Report Name:</code> and click <code>OK</code>.</p>
</div>
<div class="section level4">
<h4 id="exporting-3">Exporting<a class="anchor" aria-label="anchor" href="#exporting-3"></a>
</h4>
<div class="section level5">
<h5 id="proteins-3">Proteins<a class="anchor" aria-label="anchor" href="#proteins-3"></a>
</h5>
<p>Not yet supported. Peptides can be combined into proteins with
<code><a href="../reference/collapse.html">collapse()</a></code>.</p>
</div>
<div class="section level5">
<h5 id="peptides-3">Peptides<a class="anchor" aria-label="anchor" href="#peptides-3"></a>
</h5>
<p>The columns following columns should be considered. These can be
modified in the file
<code>tidyproteomics/inst/extdata/config/SkyLine_peptides.tsv</code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_peptides</span> <span class="op">&lt;-</span> <span class="st">"path_to_skyline_project/output_file_name.csv"</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>   <span class="fu"><a href="../reference/import.html">import</a></span><span class="op">(</span><span class="st">"Skyline"</span>, <span class="st">"peptides"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="dia-nn">DIA-NN<a class="anchor" aria-label="anchor" href="#dia-nn"></a>
</h3>
<p>The DIA-NN software suite exports quantitative peptide data back into
the project folder as <em>report.tsv</em>. The exported data file is in
a fairly “tidy” long format file, where each peptide for each sample is
reported on an individual row.</p>
<div class="section level4">
<h4 id="exporting-4">Exporting<a class="anchor" aria-label="anchor" href="#exporting-4"></a>
</h4>
<div class="section level5">
<h5 id="proteins-4">Proteins<a class="anchor" aria-label="anchor" href="#proteins-4"></a>
</h5>
<p>Not yet supported. Peptides can be combined into proteins with
<code><a href="../reference/collapse.html">collapse()</a></code>.</p>
</div>
<div class="section level5">
<h5 id="peptides-4">Peptides<a class="anchor" aria-label="anchor" href="#peptides-4"></a>
</h5>
<p>The columns following columns should be considered. These can be
modified in the file
<code>tidyproteomics/inst/extdata/config/DIA-NN_peptides.tsv</code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_peptides</span> <span class="op">&lt;-</span> <span class="st">"path_to_diann_project/output_file_name.csv"</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>   <span class="fu"><a href="../reference/import.html">import</a></span><span class="op">(</span><span class="st">"DIA-NN"</span>, <span class="st">"peptides"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="mztab">mzTab<a class="anchor" aria-label="anchor" href="#mztab"></a>
</h3>
<p>The mzTab data has limited support from major vendors -
ProteomeDiscoverer for example only supports version 1.0.0. The data for
proteins, peptides and psms are all contained within a single file.
Tidyproteomics assembles the psm, peptide and protein data independently
then sequentially combines them to generate the desired protein or
peptide level output.</p>
<div class="section level4">
<h4 id="exporting-5">Exporting<a class="anchor" aria-label="anchor" href="#exporting-5"></a>
</h4>
<div class="section level5">
<h5 id="proteins-5">Proteins<a class="anchor" aria-label="anchor" href="#proteins-5"></a>
</h5>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_proteins</span> <span class="op">&lt;-</span> <span class="st">"path_to_data/project.mzTab"</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/import.html">import</a></span><span class="op">(</span><span class="st">"mzTab"</span>, <span class="st">"proteins"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="peptides-5">Peptides<a class="anchor" aria-label="anchor" href="#peptides-5"></a>
</h5>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_peptides</span> <span class="op">&lt;-</span> <span class="st">"path_to_data/project.mzTab"</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/import.html">import</a></span><span class="op">(</span><span class="st">"mzTab"</span>, <span class="st">"peptides"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Jeff Jones.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
